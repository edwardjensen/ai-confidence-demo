<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Confidence Demonstration</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="main-layout">
        <div class="chat-section">
            <!-- API Key Input Container (for local development) -->
            <div id="apiKeyContainer" class="api-key-container" style="display: none;">
                <div class="api-key-content">
                    <h2>ðŸ”§ Development Mode</h2>
                    <p>Please enter your OpenRouter API key to continue:</p>
                    <div class="api-key-input-group">
                        <input 
                            type="password" 
                            id="apiKeyInput" 
                            placeholder="Enter your OpenRouter API key..."
                            class="api-key-input"
                        >
                        <button id="apiKeySubmit" class="api-key-submit" onclick="setApiKey()">
                            Connect
                        </button>
                    </div>
                    <p class="api-key-note">
                        Get your API key from <a href="https://openrouter.ai/keys" target="_blank">OpenRouter</a>
                    </p>
                </div>
            </div>
       
            <div class="chat-container" id="chatContainer">
                <div class="messages" id="messages"></div>
                <div class="input-area">
                    <div class="input-container">
                        <textarea 
                            id="messageInput" 
                            class="input-field" 
                            placeholder="Type your message here..."
                            rows="1"
                        ></textarea>
                        <button class="send-button" id="sendButton" onclick="sendMessage()">âž¤</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <div class="sidebar-content">
                <div class="header">
                    <h1>AI Demonstration Tool</h1>
                </div>

                <div class="legend">
                    <div class="legend-title">Confidence Levels (hover over colored tokens for details):</div>
                    <div class="legend-items">
                        <div class="legend-item">
                            <div class="legend-color confidence-high"></div>
                            <span>High Confidence (>70%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color confidence-medium"></div>
                            <span>Medium Confidence (30-70%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color confidence-low"></div>
                            <span>Low Confidence (<30%)</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar-bottom">
                <div class="temperature-control">
                    <div class="temperature-label">
                        <span>Temperature: </span>
                        <span id="temperatureValue">0.7</span>
                    </div>
                    <input 
                        type="range" 
                        id="temperatureSlider" 
                        class="temperature-slider"
                        min="0" 
                        max="20" 
                        value="7" 
                        step="1"
                    >
                    <div class="temperature-range">
                        <span>Stable</span>
                        <span class="detent-label">Start Here</span>
                        <span>Chaotic</span>
                    </div>
                </div>
                
                <div class="output-mode-control">
                    <div class="output-mode-label">Show Confidence Percentages?</div>
                    <div class="output-mode-toggle">
                        <div class="toggle-container">
                            <input type="checkbox" id="outputModeToggle" class="toggle-checkbox">
                            <label for="outputModeToggle" class="toggle-label">
                                <span class="toggle-slider"></span>
                                <span class="toggle-text-left">Yes</span>
                                <span class="toggle-text-right">No</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="footer-placeholder">
                    <p>Copyright &copy; 2025 Edward Jensen. See on GitHub: <a href="https://github.com/edwardjensen/ai-confidence-demo" target="_blank">edwardjensen/ai-confidence-demo</a>.</p>
                    <div class="build-info">
                        <p class="build-link">
                            <a href="%BUILD_URL%" target="_blank" title="View build details">
                                Build %BUILD_ID% â€¢ <span id="buildTimestamp" data-utc="%BUILD_TIMESTAMP_ISO%">%BUILD_TIMESTAMP%</span>
                            </a>
                        </p>
                        <p class="commit-info">Commit: <code>%BUILD_COMMIT%</code></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Environment variables will be injected here by build process -->
    <script id="config">
        window.AI_DEMO_CONFIG = {
            apiKey: '%API_KEY%',
            isProduction: %IS_PRODUCTION%
        };
    </script>
    <script src="script.js"></script>
</body>
</html>
